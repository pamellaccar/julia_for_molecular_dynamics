# Método de busca aleatória com tamanho de perturbação variável
function randomsearch_varying_stepsize(f, ntrial, stepsize)
    fbest = 1.0e30
    x = Vector{Float64}(undef, 2)
    xbest = Vector{Float64}(undef, 2)
    
    for i in 1:ntrial
        x[1] = xbest[1] + stepsize * (-1.0 + 2.0 * rand())
        x[2] = xbest[2] + stepsize * (-1.0 + 2.0 * rand())
        fx = f(x)
        
        if fx < fbest
            fbest = fx
            xbest[1] = x[1]
            xbest[2] = x[2]
            println(i, " New best point: ", x, " f(x) = ", fx)
        end
    end
    
    println(" Best point found: ", xbest, " f = ", fbest)
end

# Testando com diferentes tamanhos de perturbação
println("=== Step Size = 1.e-3 ===")
randomsearch_varying_stepsize(f, 1000, 1.0e-3)

println("\n=== Step Size = 1.e-2 ===")
randomsearch_varying_stepsize(f, 1000, 1.0e-2)

println("\n=== Step Size = 1.e-1 ===")
randomsearch_varying_stepsize(f, 1000, 1.0e-1)

println("\n=== Step Size = 1.0 ===")
randomsearch_varying_stepsize(f, 1000, 1.0)

println("\n=== Step Size = 10.0 ===")
randomsearch_varying_stepsize(f, 1000, 10.0)

# Comparação com o método totalmente aleatório
println("\n=== Fully Random Search (100,000 trials) ===")
randomsearch(f, 100000)

#= === Step Size = 1.e-3 ===
1 New best point: [-0.0006207203684191971, -0.0005078281345307975] f(x) = 6.431831899914936e-7
4 New best point: [-0.0002567339493984091, 0.0002617871496244811] f(x) = 1.344448324822153e-7
9 New best point: [0.0001958387094836751, -0.00018596168706561415] f(x) = 7.29345491885207e-8
17 New best point: [-0.00022492661677759365, 8.702280342111633e-5] f(x) = 5.816495125028473e-8
40 New best point: [-0.0001884556127550834, 5.896298097247064e-5] f(x) = 3.899215110405389e-8
62 New best point: [2.3939449045852642e-5, 0.00017772617483918706] f(x) = 3.215969044358827e-8
126 New best point: [6.59696898650861e-5, 0.00014587161348986598] f(x) = 2.5630527603032492e-8
201 New best point: [-1.650980807192639e-5, -3.7378367232771123e-6] f(x) = 2.8654518594172477e-10
 Best point found: [-1.650980807192639e-5, -3.7378367232771123e-6] f = 2.8654518594172477e-10

=== Step Size = 1.e-2 ===
1 New best point: [-0.006254932829832827, 0.009667720393791789] f(x) = 0.00013258900231825815
4 New best point: [0.0005550189207638723, 0.0007679292164951609] f(x) = 8.977612839527653e-7
39 New best point: [0.0007978237363166363, 0.0004862183261674365] f(x) = 8.729309749313011e-7
325 New best point: [-1.4907323142505685e-5, -0.0006945005323725478] f(x) = 4.825532177490274e-7
352 New best point: [-0.0005621176749037372, -0.00025548515806940334] f(x) = 3.812489464329316e-7
515 New best point: [-0.0004736751727002165, 5.801389419983824e-5] f(x) = 2.2773378115280995e-7
819 New best point: [-0.0003206786739906243, 0.0003313798168144062] f(x) = 2.126473949443345e-7
 Best point found: [-0.0003206786739906243, 0.0003313798168144062] f = 2.126473949443345e-7

=== Step Size = 1.e-1 ===
1 New best point: [0.08030729359769694, -0.06953035153193783] f(x) = 0.011283731189141544
2 New best point: [-0.013021019857863816, -0.01821841598082012] f(x) = 0.0005014576389890859
45 New best point: [0.002510240518178518, 0.00022044467393483175] f(x) = 6.349903313371388e-6
 Best point found: [0.002510240518178518, 0.00022044467393483175] f = 6.349903313371388e-6

=== Step Size = 1.0 ===
1 New best point: [-0.4452309749790102, -0.7533047329684159] f(x) = 0.7656986417933764
3 New best point: [0.10163028652362116, -0.7068297899529017] f(x) = 0.5099370671037364
6 New best point: [0.16514569179897842, 0.035863226071467524] f(x) = 0.028559270504016358
8 New best point: [0.021274140542347775, 0.021237358795265004] f(x) = 0.000903614464414385
802 New best point: [-0.013387870535562785, -0.00478842912965205] f(x) = 0.00020216413100669045
 Best point found: [-0.013387870535562785, -0.00478842912965205] f = 0.00020216413100669045

=== Step Size = 10.0 ===
1 New best point: [-8.839273413534665, -7.999769334335851] f(x) = 142.12906388180102
2 New best point: [-6.712130785839294, 0.6532013755807684] f(x) = 45.47937172327223
4 New best point: [-3.1886109358373793, -2.2316624233901607] f(x) = 15.147556872113373
11 New best point: [3.3563267989616397, 1.5680346593656878] f(x) = 13.723662274400155
12 New best point: [3.2487684141694095, 0.7937518640755656] f(x) = 11.184538230628256
14 New best point: [0.11292805637398651, 2.7656529199600475] f(x) = 7.661588819599943
31 New best point: [-0.9353882298893779, 2.4349202357915187] f(x) = 6.803787695282608
38 New best point: [-0.35810088602996837, 0.08042913462292889] f(x) = 0.1347050902716416
 Best point found: [-0.35810088602996837, 0.08042913462292889] f = 0.1347050902716416

=== Fully Random Search (100,000 trials) ===
1 New best point: [-8.898993631896776, 0.49942365475568806] f(x) = 79.4415116474689
2 New best point: [-2.7723875568538814, -5.330420610507536] f(x) = 36.09951665032177
5 New best point: [-2.635902325169786, 3.712204883946292] f(x) = 20.72844616823019
12 New best point: [0.6069636894557604, -4.016312891416931] f(x) = 16.499174162079573
13 New best point: [1.9781538900889792, -1.679406096244449] f(x) = 6.733497648977181
43 New best point: [0.9119676998269348, 1.6700142753777225] f(x) = 3.62063276549301
52 New best point: [-1.3375490410829975, 0.20111087327218513] f(x) = 1.8294830206503472
141 New best point: [1.283396506681422, 0.07765633870716648] f(x) = 1.6531371003034792
230 New best point: [-0.7865803496312544, 0.5130340476188504] f(x) = 0.8819125804422074
324 New best point: [-0.45883132664813253, 0.12284884872477697] f(x) = 0.22561802594668845
466 New best point: [-0.2333943181672531, -0.3489889970957307] f(x) = 0.17626622784664092
718 New best point: [-0.027572154573224594, -0.3340689861585915] f(x) = 0.11236231122083898
933 New best point: [0.2831228172101259, 0.08147864253831827] f(x) = 0.0867972988148854
2330 New best point: [0.008184846236174437, 0.2029820193616203] f(x) = 0.041268691892031015
2479 New best point: [-0.13719223621954413, -0.08814515772868958] f(x) = 0.026591278509934757
19889 New best point: [0.12990040317781038, 0.007187313566845432] f(x) = 0.016925772222065847
20182 New best point: [-0.07721611747904689, 0.006265154710298759] f(x) = 0.006001580962081949
44890 New best point: [-0.009170818053034324, 0.05048689726946343] f(x) = 0.002633030699659214
56889 New best point: [0.018706028553697962, 0.004340638149226805] f(x) = 0.0003687566437942866
 Best point found: [0.018706028553697962, 0.004340638149226805] f = 0.0003687566437942866  =#